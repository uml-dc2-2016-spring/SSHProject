int shell_session(ssh_session session)
{
  ssh_channel channel;
  int rc;
  channel = ssh_channel_new(session);
  if (channel == NULL)
    return SSH_ERROR;
  rc = ssh_channel_open_session(channel);
  if (rc != SSH_OK)
  {
    ssh_channel_free(channel);
    return rc;
  }
  ...
  ssh_channel_close(channel);
  ssh_channel_send_eof(channel);
  ssh_channel_free(channel);
  return SSH_OK;
}

make session
multiple channel belong to session
make channel
make into ssh with SSH_channel_open_session

do not use ssh_channel_read_nonblocking. can lock computer
